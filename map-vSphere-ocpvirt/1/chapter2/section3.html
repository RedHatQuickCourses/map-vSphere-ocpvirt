<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Storage - the bigger story :: Map vSphere features to OpenShift Virtualization</title>
    <link rel="prev" href="section2.html">
    <link rel="next" href="section4.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Map vSphere features to OpenShift Virtualization</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/changeme/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="map-vSphere-ocpvirt" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Map vSphere features to OpenShift Virtualization</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter1/index.html">Workflow mapping of Red Hat OpenShift Virtualization to vSphere</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/section1.html">Terminology Comparison</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/section2.html">How to Manage Virtual Machines?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/section3.html">How do I manage the virtualization environment?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/section4.html">Alternate View: How do I connect VMs and containers/k8s?</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Capability mapping of Red Hat OpenShift Virtualization to vSphere</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section1.html">Summary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section2.html">Automation</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="section3.html">Storage - the bigger story</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section4.html">Data Protection and Disaster Recovery</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section5.html">Networking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section6.html">VM Administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section7.html">VM Optimization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section8.html">High Availability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section9.html">Resource Management and Optimization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section10.html">Hosted Kubernetes Integration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section11.html">Access Control</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section12.html">Monitoring, Alerts/Events, Logs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Map vSphere features to OpenShift Virtualization</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Map vSphere features to OpenShift Virtualization</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Map vSphere features to OpenShift Virtualization</a></li>
    <li><a href="index.html">Capability mapping of Red Hat OpenShift Virtualization to vSphere</a></li>
    <li><a href="section3.html">Storage - the bigger story</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Storage - the bigger story</h1>
<div id="preamble">
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>OpenShift Virtualization uses Kubernetes CSI abstractions for VM storage</p>
<div class="ulist">
<ul>
<li>
<p>In vSphere, static pools of capacity are given to the hypervisor (datastore), each VM disk is one or more file(s).
Each datastore holds many VM disks.
The virtualization admin is responsible for storage capacity management.</p>
</li>
<li>
<p>OpenShift / k8s uses dynamic PV/PVC provisioning of a CSI compliant storage provider.
Each PV holds one VM disk.
The storage admin is responsible for storage capacity management</p>
</li>
</ul>
</div>
</li>
<li>
<p>Local storage - maximize host resource utilization via HostPathProvisioner, LocalStorageOperator, TopoLVM to provide PVs to VMs, Pods, or hosted storage solutions</p>
</li>
<li>
<p>Both vSphere and OpenShift have converged hypervisor and storage offerings</p>
<div class="ulist">
<ul>
<li>
<p>Use OpenShift Data Foundation, or a partner offering with a CSI provider, e.g. Portworx, to host VMs in a converged storage + OpenShift deployment</p>
</li>
<li>
<p>VMware has VSAN and multiple ecosystem partners offering hyperconverged features, e.g. Nutanix</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_storage_core_featurecapability_matrix"><a class="anchor" href="#_storage_core_featurecapability_matrix"></a>Storage - Core feature/capability matrix</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">OpenShift Virtualization</th>
<th class="tableblock halign-left valign-top">VMware</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accessing legacy storage arrays</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://kubernetes-csi.github.io/docs/drivers.html">All major storage vendors have a CSI compliant driver</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compatible with all major storage vendors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage accelerated cloning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes, depending on CSI driver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes, via VAAI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk resizing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Policy based storage management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implicit to the platform (StorageClasses)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">vVols, SPBM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk / VM snapshots</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-disruptive storage migration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*[Check section below]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storage vMotion</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*Non-disruptive storage migration</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OpenShift Virtualization does not use datastores, where one storage device (LUN, NFS export, etc.) holds many VM disks. This means that the use case where the storage device is running out of GiB or IOPS and needs to have capacity “freed” does not apply with OpenShift Virtualization.</p>
</li>
<li>
<p>Different use cases.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Regular storage provisioning</strong> / capacity expansion for a VM - k8s separates VM/Pod storage consumption (i.e. the PVC) from the storage provisioning via StorageClass + CSI. Capacity management is handled through the CSI storage provide, so Storage migration in not needed.</p>
</li>
<li>
<p><strong> Changing k8s storage class</strong> (initially deploy VMs on wrong storage class), etc. - cold migration using Migration Toolkit for Containers (MTC).</p>
</li>
<li>
<p><strong>Storage array life cycle</strong> - migrating to newer version of same storage vendor - use storage vendor provided tooling to non-disruptively migrate from the old array to the new one.</p>
</li>
<li>
<p><strong>Storage array life cycle</strong> - Migrating from one storage vendor to different vendor - VM cold migration using Migration Toolkit for Containers.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="section2.html">Automation</a></span>
  <span class="next"><a href="section4.html">Data Protection and Disaster Recovery</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
